---
layout: post
title: RabbitMQ 的学习和使用
category : [JavaEE]
tagline: "Supporting tagline"
tags : [RabbitMQ]
---
{% include JB/setup %}
# RabbitMQ 的学习和使用
---

> [RabbitMQ 官网](https://www.rabbitmq.com/)

[RabbitMQ 消息队列（一）: Detailed Introduction 详细介绍](http://blog.csdn.net/anzhsoft/article/details/19563091?utm_source=tuicool&utm_medium=referral)


## Set up RabbitMQ broker

Before you can build your messaging application, you need to set up the server that will handle receiving and sending messages.

RabbitMQ is an AMQP server. The server is freely available at [http://www.rabbitmq.com/download.html](https://www.rabbitmq.com/download.html). You can download it manually, or if you are using a Mac with homebrew:

```
brew install rabbitmq
```

Unpack the server and launch it with default settings.

```
rabbitmq-server
```

You should see something like this:

```
            RabbitMQ 3.1.3. Copyright (C) 2007-2013 VMware, Inc.
##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
##  ##
##########  Logs: /usr/local/var/log/rabbitmq/rabbit@localhost.log
######  ##        /usr/local/var/log/rabbitmq/rabbit@localhost-sasl.log
##########
            Starting broker... completed with 6 plugins.
```

You can also use [Docker Compose](https://docs.docker.com/compose/) to quickly launch a RabbitMQ server if you have docker running locally. There is a `docker-compose.yml` in the root of the "complete" project in Github. It is very simple:

`docker-compose.yml`

```
rabbitmq:
  image: rabbitmq:management
  ports:
    - "5672:5672"
    - "15672:15672"
```

With this file in the current directory you can run `docker-compose up` to get RabbitMQ running in a container.





## 创建消息接收类





## 注册 listener

Spring AMQP 的 `RabbitTemplate` 提供了所有你要使用 RabbitMQ 发送和接收消息的方法。通常只需要配置以下几项：

1.

2.

3.



Spring Boot 启动时会为我们自动创建一个 connection factory 和一个 RabbitTemplate。

我们使用 `RabbitTemplate` 来发送消息，并且注册一个 `Receiver`  消息接收类和消息监听器容器来接收消息。connection factory 将驱动它们并允许它们连接 RabbitMQ 服务器。

#### RabbitMQConfig.java





## 发送一条测试信息

测试消息是通过 `CommandLineRunner` 发送的，它会等待 Receiver 中的 countDownLatch，然后关闭 application context。

#### Runner.java



> more details : http://docs.spring.io/spring-amqp/reference/html/_introduction.html#quick-tour

http://www.iteye.com/topic/128636

http://www.myexception.cn/database/1350084.html



# Spring AMQP

> [Understanding AMQP](https://spring.io/understanding/AMQP)

> [Spring AMQP](http://docs.spring.io/spring-amqp/reference/html/index.html)



